apply plugin: 'cpp'

model {
	components {
		main(NativeExecutableSpec) {
		   binaries.all {
		     linker.args '-pthread'
		   }
		}
	}
}

tasks.build.doFirst {
	exec {
		commandLine "perl", "-w", "-e", "s/${BUILD_NUMBER}/"+project.buildnumber+"/g", "/src/main/cpp/Main.cpp"
	}
}